<html>
<head>
    <title>Example 29</title>

    <!-- Origin Trial Token, feature = WebVR (For Chrome M59+), origin = https://hazardu5.github.io, expires = 2017-06-28 -->
    <meta http-equiv="origin-trial" data-feature="WebVR (For Chrome M59+)" data-expires="2017-06-28" content="Ahx8Ww177dEDI39gZofw2EAg/ttuVUVwU+gMcmz+MsWVPhOpswY8beyZkJ683y01KLEgejjSP4aAPf1SR+L5UwcAAABUeyJvcmlnaW4iOiJodHRwczovL2hhemFyZHU1LmdpdGh1Yi5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViVlIxLjEiLCJleHBpcnkiOjE0OTg3MDA2MjV9">

    <script src="https://cdn.rawgit.com/aframevr/aframe/36cde3c/dist/aframe-master.min.js"></script>

    <script src="https://cdn.rawgit.com/wizgrav/aframe-effects/master/dist/aframe-effects.min.js"></script>

    <script src="https://cdn.rawgit.com/mayognaise/aframe-draw-shader/master/dist/aframe-draw-shader.min.js"></script>

    <script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>

    <script src="https://cdn.rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>

    <!--<script src="https://aframe.io/releases/0.6.1/aframe.js"></script>-->

    <script src="assets/js/components/area-light.js"></script>

    <script src="assets/js/components/canvas-surface.js"></script>

    <style>
        body > div#fullscreenContainer {
            position: fixed;
            height: 256px;
            width: 256px;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            background-color: rgb(0, 0, 0);
            display: block;
            z-index: -1;
        }

        body > div#fullscreenContainer > canvas#fullscreen.maximum {
            position: static;
            height: 256px;
            width: 256px;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>



<a-scene effects="bloom, fxaa" bloom="radius: 0.01" fxaa>
<!--<a-scene>-->
    <a-assets>
        <a-asset-item id="model" src="assets/gltf/arcade_machine/scene.gltf"></a-asset-item>
        <img id="static-img" src="assets/img/static-downsized.gif" />
        <img id="arcade-1943-img" src="assets/img/1943.gif" />
    </a-assets>

    <!--<a-plane id="area-light2" area-light="width:0.1; height: 0.1; intensity: 0.8" width="0.500" height="0.400" position="-0.034 1.598 -4.063" rotation="-61.000 0 0" material="shader:gif;src:#static-img; emissive: #ffffff;"></a-plane>-->
    <a-plane id="area-light2" area-light="width:0.1; height: 0.1; intensity: 0.8" width="0.500" height="0.400" position="-0.034 1.598 -4.063" rotation="-61.000 0 0" canvas-surface material="shader: draw; emissive: #ffffff;"></a-plane>
    <a-entity gltf-model="#model" position="0 1.418 -3.800" rotation="0 180 0"></a-entity>

    <a-light id="ambient-light" type="ambient" intensity="0.3"></a-light>

    <a-light id="directional-light1" type="directional" position="4.797 3.973 0" rotation="61.02000518143267 0 0" light="intensity:0"></a-light>
    <a-light id="directional-light2" type="directional" position="0 1.724 -7.142" rotation="51.8526804593395 0 0" light="intensity:0.19999999999999996"></a-light>

    <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#FF0000"></a-plane>
    <a-sky color="#000000"></a-sky>
</a-scene>

<div id="fullscreenContainer">
    <canvas id="fullscreen" class="maximum"></canvas>
</div>

<script type="text/javascript" src="assets/js/emularity/es6-promise.js"></script>
<script type="text/javascript" src="assets/js/emularity/browserfs.min.js"></script>
<script type="text/javascript" src="assets/js/emularity/loader.js"></script>
<script type="text/javascript">
    //mess binaries can be downloaded from: https://archive.org/details/emularity_engine_jsmame
    var emulator = new Emulator(document.querySelector("#fullscreen"),
            null,
            new JSMAMELoader(JSMAMELoader.driver("bublbobl"),
                    JSMAMELoader.nativeResolution(256, 256),
                    JSMAMELoader.emulatorJS("assets/js/emularity/emulators/jsmess/mamebublbobl.js.gz"), //https://archive.org/download/emularity_engine_v1/mame1943.js.gz
                    JSMAMELoader.mountFile("bublbobl.zip",
                            JSMAMELoader.fetchFile("Game File",
                                    "assets/js/emularity/emulators/jsmess/bublbobl.zip"))))
    emulator.setScale(1);
    emulator.start({ waitAfterDownloading: false });
</script>

</body>



</html>